<blocks app="Snap! 7, https://snap.berkeley.edu" version="2"><palette><category name="Advanced eBrain" color="0,116,143,1"/></palette><block-definition s="G-code to plotter %&apos;g-code&apos;" type="command" category="Advanced eBrain"><header></header><code></code><translations></translations><inputs><input type="%s"></input></inputs><script><block s="doDeclareVariables"><list><l>points</l></list></block><block s="doSetVar"><l>points</l><block s="evaluate"><block s="reportJSFunction"><list><l>gcode</l></list><l>var points = [];&#xD;var lines = gcode.split(/\r?\n/);&#xD;for (const l of lines) {&#xD;  if (l.startsWith("G01")) {&#xD;    var line = l.split(" ");&#xD;    var point = [];&#xD;    for (const c of line) {&#xD;      if (c.startsWith("X")) {&#xD;        point.push(new List([&apos;X&apos;, parseFloat(c.substring(1))]));&#xD;      } else if (c.startsWith("Y")) {&#xD;        point.push(new List([&apos;Y&apos;, parseFloat(c.substring(1))]));&#xD;      }&#xD;    }&#xD;    if (point.length === 2) {&#xD;      points.push(new List(point));&#xD;    }&#xD;  }&#xD;}&#xD;return new List(points);</l></block><list><block var="g-code"/></list></block></block><block s="doForEach"><l>item</l><block var="points"/><script><block s="doSayFor"><block var="item"/><l>2</l></block></script></block></script></block-definition></blocks>